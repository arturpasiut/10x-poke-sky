---
import MainLayout from "../../layouts/MainLayout.astro";
import { PokemonExplorer } from "../../components/pokemon/PokemonExplorer";

const initialSearch = Astro.url.searchParams.get("q") ?? "";
const initialFilters = {
  types: Astro.url.searchParams.getAll("type").map((value) => value.trim().toLowerCase()),
  generation: Astro.url.searchParams.get("generation") ?? "",
  region: Astro.url.searchParams.get("region") ?? "",
};
---

<MainLayout title="Pokédex – 10x Poke Sky">
  <div slot="header" class="space-y-2">
    <h1 class="text-4xl font-semibold sm:text-5xl">Pokédex</h1>
    <p class="text-muted-foreground">Przeglądaj, wyszukuj i filtruj Pokémony w czasie rzeczywistym.</p>
  </div>

  <PokemonExplorer client:load initialSearch={initialSearch} initialFilters={initialFilters} />
</MainLayout>
